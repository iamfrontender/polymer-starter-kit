<dom-module id="device-info-page">
  <template>
    <link rel="stylesheet" href="device-info-page.css"/>
        <paper-toolbar class="medium-tall">
          <div class="top">
            <paper-icon-button icon="arrow-back" on-tap="_close"></paper-icon-button>
            <span class="layout flex">{{device.name}}</span>
          </div>

          <div class="middle"></div>

          <div class="tabs bottom fit">
            <paper-tabs selected="{{tab}}">
              <paper-tab>Details</paper-tab>
              <paper-tab>Properties</paper-tab>
              <paper-tab>Actions</paper-tab>
            </paper-tabs>
          </div>
        </paper-toolbar>

        <div class="content">
          <neon-animated-pages id="device-info-pages"
                               selected="{{tabSelected}}"
                               entry-animation="{{entryAnimation}}"
                               exit-animation="{{exitAnimation}}"
            >
            <neon-animatable>
              <evt-thng-full thng="{{device}}"></evt-thng-full>
            </neon-animatable>
            <neon-animatable>
              <evt-thng-properties thng="{{device}}"></evt-thng-properties>
            </neon-animatable>
            <neon-animatable>
              <evt-thng-actions user={{user}} thng="{{device}}"></evt-thng-actions>
            </neon-animatable>
          </neon-animated-pages>
        </div>
  </template>
  <script>
    Polymer({
      is: 'device-info-page',

      properties: {
        // Using two different properties, since
        // neon-animated-pages are catching update before custom observer.
        // i.e. animation would work with -1 step offset.
        tab: {
          type: Number,
          observer: '_tabChanged'
        },
        tabSelected: {
          type: Number
        }
      },

      ready: function() {
        this.tab = 0;
      },

      _close: function () {
        app.device = null;

        page.back();
      },

      _tabChanged: function(newIndex, oldIndex) {
        if (newIndex < oldIndex) {
          this.entryAnimation = 'slide-from-left-animation';
          this.exitAnimation = 'slide-right-animation';
        } else {
          this.entryAnimation = 'slide-from-right-animation';
          this.exitAnimation = 'slide-left-animation';
        }

        this.tabSelected = newIndex;
      }

    });
  </script>
</dom-module>
