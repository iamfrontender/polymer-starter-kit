<link rel="import" href="string-property.html"/>
<link rel="import" href="boolean-property.html"/>

<dom-module id="device-property">
  <template>
    <section id="editor" class="item">
    </section>
  </template>
  <script>
    Polymer({
      is: 'device-property',

      properties: {
        property: {
          type: Object,
          observer: '_propertyChanged'
        }
      },

      _propertyChanged: function() {
        this.clear();

        if (this.property.meta) {
          this._loadFromMeta();
        } else {
          this._loadDefault();
        }
      },

      load: function(property) {
        this.property = property;
      },

      clear: function() {
        while (this.$.editor.firstElementChild) {
          this.$.editor.removeChild(this.$.editor.firstElementChild);
        }
      },

      _loadFromMeta: function () {
        var type = this.property.meta.type;

        this.$.editor.appendChild(this._createEditor(type, this.property));
      },

      _loadDefault: function() {
        this.$.editor.appendChild(this._createEditor('string', this.property));
      },

      _createEditor: function(type) {
        var editor = document.createElement(type + '-property');

        editor.property = this.property;
        editor.thng = this.thng;

        return editor;
      }
    });
  </script>
</dom-module>
