<script>
  EvtElements.behaviors.thng = {

    hasProperties: function() {
      if (this.thng) {
        return this.listProperties().length !== 0;
      }
    },

    listProperties: function() {
      if (this.thng && this._keys) {
        return this._keys(this, 'thng.properties', []);
      }
    },

    getProperty: function(name) {
      if (this.thng) {
        var raw = this.thng.properties[name];

        if (this._isValue(raw)) {
          return {
            name: name,
            value: raw,
            meta: this._getMeta(name)
          };
        }
      }
    },

    _isValue: function(value) {
      return !_.isNull(value) && !_.isUndefined(value);
    },

    _getMeta: function(name) {
      // TODO: Abstract Data Structures descriptors??
      if (this.thng) {
        return _.get(this.thng, 'customFields.' + name + '.values');
      }
    }
  }
</script>
